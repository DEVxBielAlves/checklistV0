(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[366],{1760:t=>{function e(t){var e=Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}e.keys=()=>[],e.resolve=e,e.id=1760,t.exports=e},15168:(t,e,a)=>{"use strict";a.d(e,{X:()=>i});var o=a(26597);function i(t){let e=new o.Ay({unit:"pt",format:"a4"}),a=t=>{e.setDrawColor(220,220,220),e.line(40,t,555,t)},i=40;e.setFont("helvetica","bold"),e.setFontSize(16),e.text("Checklist: ".concat(t.titulo),40,i),i+=20,e.setFontSize(10),e.setFont("helvetica","normal"),e.text("ID: ".concat(t.id),40,i),i+=14,e.text("Criado em: ".concat(t.criadoEm),40,i),a(i+=20),i+=16,e.setFont("helvetica","bold"),e.text("Dados Iniciais",40,i),i+=14,e.setFont("helvetica","normal"),e.text("Placa: ".concat(t.dadosIniciais.placa),40,i),i+=12,e.text("Motorista: ".concat(t.dadosIniciais.motorista),40,i),i+=12,e.text("Inspetor: ".concat(t.dadosIniciais.inspetor),40,i),i+=12,e.text("Marca: ".concat(t.dadosIniciais.marca),40,i),i+=12,e.text("Modelo: ".concat(t.dadosIniciais.modelo),40,i),a(i+=20),i+=16,e.setFont("helvetica","bold"),e.text("Verifica\xe7\xf5es (Etapa 2)",40,i),i+=14,e.setFont("helvetica","normal"),t.verificacoes.forEach(t=>{var a;i>770&&(e.addPage(),i=40);let o=null!==(a=t.status)&&void 0!==a?a:"Pendente";e.text("".concat(t.titulo,"  [").concat(o,"]"),40,i),i+=12,t.detalhe&&(e.text("  Detalhe: ".concat(t.detalhe),40,i),i+=12),t.observacoes&&(e.text("  Obs.: ".concat(t.observacoes),40,i),i+=12)}),a(i+=12),i+=16,e.setFont("helvetica","bold"),e.text("Inspe\xe7\xf5es (Etapa 3)",40,i),i+=14,e.setFont("helvetica","normal"),t.inspecoes.forEach(t=>{var a;i>770&&(e.addPage(),i=40);let o=null!==(a=t.status)&&void 0!==a?a:"Pendente";e.text("".concat(t.titulo,"  [").concat(o,"]"),40,i),i+=12,t.detalhe&&(e.text("  Detalhe: ".concat(t.detalhe),40,i),i+=12),t.observacoes&&(e.text("  Obs.: ".concat(t.observacoes),40,i),i+=12)}),e.save("checklist-".concat(t.id,".pdf"))}},53580:(t,e,a)=>{"use strict";a.d(e,{dj:()=>f});var o=a(12115);let i=0,r=new Map,s=t=>{if(r.has(t))return;let e=setTimeout(()=>{r.delete(t),l({type:"REMOVE_TOAST",toastId:t})},1e6);r.set(t,e)},n=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,1)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{let{toastId:a}=e;return a?s(a):t.toasts.forEach(t=>{s(t.id)}),{...t,toasts:t.toasts.map(t=>t.id===a||void 0===a?{...t,open:!1}:t)}}case"REMOVE_TOAST":if(void 0===e.toastId)return{...t,toasts:[]};return{...t,toasts:t.toasts.filter(t=>t.id!==e.toastId)}}},d=[],c={toasts:[]};function l(t){c=n(c,t),d.forEach(t=>{t(c)})}function u(t){let{...e}=t,a=(i=(i+1)%Number.MAX_SAFE_INTEGER).toString(),o=()=>l({type:"DISMISS_TOAST",toastId:a});return l({type:"ADD_TOAST",toast:{...e,id:a,open:!0,onOpenChange:t=>{t||o()}}}),{id:a,dismiss:o,update:t=>l({type:"UPDATE_TOAST",toast:{...t,id:a}})}}function f(){let[t,e]=o.useState(c);return o.useEffect(()=>(d.push(e),()=>{let t=d.indexOf(e);t>-1&&d.splice(t,1)}),[t]),{...t,toast:u,dismiss:t=>l({type:"DISMISS_TOAST",toastId:t})}}},53999:(t,e,a)=>{"use strict";a.d(e,{cn:()=>r});var o=a(52596),i=a(39688);function r(){for(var t=arguments.length,e=Array(t),a=0;a<t;a++)e[a]=arguments[a];return(0,i.QP)((0,o.$)(e))}},61109:(t,e,a)=>{"use strict";a.d(e,{Yq:()=>l,ZA:()=>c,eg:()=>n,wJ:()=>d});var o=a(72354);let i=null;function r(){if(i)return i;let t="https://jfrqmzonslqfyhmamplk.supabase.co",e="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpmcnFtem9uc2xxZnlobWFtcGxrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ2NjI2MTAsImV4cCI6MjA3MDIzODYxMH0.HsKcAHdabIAlnunx7FIG-Viwc_cJIjbjixdHGZSApG0";if(!t||!e)throw Error("Vari\xe1veis NEXT_PUBLIC_SUPABASE_URL/NEXT_PUBLIC_SUPABASE_ANON_KEY n\xe3o configuradas.");return i=(0,o.UU)(t,e)}function s(t){let e=new Date(t.criado_em?t.criado_em:t.created_at);return{id:t.id,titulo:t.titulo||"Checklist Basel",criadoEm:function(t){let e=String(t.getDate()).padStart(2,"0"),a=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getFullYear()),i=String(t.getHours()).padStart(2,"0"),r=String(t.getMinutes()).padStart(2,"0"),s=String(t.getSeconds()).padStart(2,"0");return"".concat(e,"-").concat(a,"-").concat(o,"  ").concat(i,":").concat(r,":").concat(s)}(e),dadosIniciais:{placa:t.placa,motorista:t.motorista,inspetor:t.inspetor,marca:t.marca,modelo:t.modelo},verificacoes:[],inspecoes:[],completo:t.completo}}async function n(){let t=r(),{data:e,error:a}=await t.from("checklists").select("*").order("criado_em",{ascending:!1});if(a)throw a;return e.map(s)}async function d(t){var e,a;let o=r(),{error:i}=await o.from("checklists").insert({id:t.id,titulo:t.titulo,placa:t.dadosIniciais.placa,motorista:t.dadosIniciais.motorista,inspetor:t.dadosIniciais.inspetor,marca:t.dadosIniciais.marca,modelo:t.dadosIniciais.modelo,completo:t.completo});if(i)throw i;if(null===(e=t.verificacoes)||void 0===e?void 0:e.length){let e=t.verificacoes.map((e,a)=>{var o;return{checklist_id:t.id,ordem:a,titulo:e.titulo,detalhe:null!==(o=e.detalhe)&&void 0!==o?o:null,status:e.status,observacoes:e.observacoes}}),{error:a}=await o.from("checklist_verificacoes").insert(e);if(a)throw a}if(null===(a=t.inspecoes)||void 0===a?void 0:a.length){let e=t.inspecoes.map((e,a)=>{var o;return{checklist_id:t.id,ordem:a,titulo:e.titulo,detalhe:null!==(o=e.detalhe)&&void 0!==o?o:null,status:e.status,observacoes:e.observacoes}}),{data:a,error:i}=await o.from("checklist_inspecoes").insert(e).select("id, ordem");if(i)throw i;let r=new Map;a.forEach(t=>r.set(t.ordem,t.id));let s=[];if(t.inspecoes.forEach((t,e)=>{let a=r.get(e);a&&t.midias.forEach(t=>{s.push({inspecao_id:a,nome:t.nome,tipo:t.tipo,tamanho:t.tamanho,kind:"image",data_url:t.dataUrl})})}),s.length){let{error:t}=await o.from("checklist_inspecoes_midias").insert(s);if(t)throw t}}}async function c(t){let e=r(),{data:a,error:o}=await e.from("checklists").select("*").eq("id",t).limit(1);if(o)throw o;let i=a[0];if(!i)return null;let{data:n,error:d}=await e.from("checklist_verificacoes").select("*").eq("checklist_id",t).order("ordem",{ascending:!0});if(d)throw d;let{data:c,error:l}=await e.from("checklist_inspecoes").select("*").eq("checklist_id",t).order("ordem",{ascending:!0});if(l)throw l;let u=c.map(t=>t.id),f=[];if(u.length){let{data:t,error:a}=await e.from("checklist_inspecoes_midias").select("*").in("inspecao_id",u);if(a)throw a;f=t}let p=new Map;f.forEach(t=>{var e;let a=null!==(e=p.get(t.inspecao_id))&&void 0!==e?e:[];a.push(t),p.set(t.inspecao_id,a)});let v=s(i);return v.verificacoes=n.map(t=>{var e;return{titulo:t.titulo,detalhe:null!==(e=t.detalhe)&&void 0!==e?e:void 0,status:t.status,observacoes:t.observacoes}}),v.inspecoes=c.map(t=>{var e,a;return{titulo:t.titulo,detalhe:null!==(e=t.detalhe)&&void 0!==e?e:void 0,status:t.status,observacoes:t.observacoes,midias:(null!==(a=p.get(t.id))&&void 0!==a?a:[]).map(t=>({nome:t.nome,tipo:t.tipo,tamanho:t.tamanho,kind:"image",dataUrl:t.data_url}))}}),v}async function l(t){let e=r(),{error:a}=await e.from("checklists").delete().eq("id",t);if(a)throw a}},88145:(t,e,a)=>{"use strict";a.d(e,{E:()=>d});var o=a(95155);a(12115);var i=a(99708),r=a(74466),s=a(53999);let n=(0,r.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function d(t){let{className:e,variant:a,asChild:r=!1,...d}=t,c=r?i.DX:"span";return(0,o.jsx)(c,{"data-slot":"badge",className:(0,s.cn)(n({variant:a}),e),...d})}},88482:(t,e,a)=>{"use strict";a.d(e,{Wu:()=>d,ZB:()=>n,Zp:()=>r,aR:()=>s,wL:()=>c});var o=a(95155);a(12115);var i=a(53999);function r(t){let{className:e,...a}=t;return(0,o.jsx)("div",{"data-slot":"card",className:(0,i.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...a})}function s(t){let{className:e,...a}=t;return(0,o.jsx)("div",{"data-slot":"card-header",className:(0,i.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...a})}function n(t){let{className:e,...a}=t;return(0,o.jsx)("div",{"data-slot":"card-title",className:(0,i.cn)("leading-none font-semibold",e),...a})}function d(t){let{className:e,...a}=t;return(0,o.jsx)("div",{"data-slot":"card-content",className:(0,i.cn)("px-6",e),...a})}function c(t){let{className:e,...a}=t;return(0,o.jsx)("div",{"data-slot":"card-footer",className:(0,i.cn)("flex items-center px-6 [.border-t]:pt-6",e),...a})}},89852:(t,e,a)=>{"use strict";a.d(e,{p:()=>r});var o=a(95155);a(12115);var i=a(53999);function r(t){let{className:e,type:a,...r}=t;return(0,o.jsx)("input",{type:a,"data-slot":"input",className:(0,i.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...r})}},97168:(t,e,a)=>{"use strict";a.d(e,{$:()=>d,r:()=>n});var o=a(95155);a(12115);var i=a(99708),r=a(74466),s=a(53999);let n=(0,r.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function d(t){let{className:e,variant:a,size:r,asChild:d=!1,...c}=t,l=d?i.DX:"button";return(0,o.jsx)(l,{"data-slot":"button",className:(0,s.cn)(n({variant:a,size:r,className:e})),...c})}},99840:(t,e,a)=>{"use strict";a.d(e,{Cf:()=>u,Es:()=>p,L3:()=>v,c7:()=>f,lG:()=>n,rr:()=>m,zM:()=>d});var o=a(95155);a(12115);var i=a(50237),r=a(54416),s=a(53999);function n(t){let{...e}=t;return(0,o.jsx)(i.bL,{"data-slot":"dialog",...e})}function d(t){let{...e}=t;return(0,o.jsx)(i.l9,{"data-slot":"dialog-trigger",...e})}function c(t){let{...e}=t;return(0,o.jsx)(i.ZL,{"data-slot":"dialog-portal",...e})}function l(t){let{className:e,...a}=t;return(0,o.jsx)(i.hJ,{"data-slot":"dialog-overlay",className:(0,s.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...a})}function u(t){let{className:e,children:a,showCloseButton:n=!0,...d}=t;return(0,o.jsxs)(c,{"data-slot":"dialog-portal",children:[(0,o.jsx)(l,{}),(0,o.jsxs)(i.UC,{"data-slot":"dialog-content",className:(0,s.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...d,children:[a,n&&(0,o.jsxs)(i.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,o.jsx)(r.A,{}),(0,o.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function f(t){let{className:e,...a}=t;return(0,o.jsx)("div",{"data-slot":"dialog-header",className:(0,s.cn)("flex flex-col gap-2 text-center sm:text-left",e),...a})}function p(t){let{className:e,...a}=t;return(0,o.jsx)("div",{"data-slot":"dialog-footer",className:(0,s.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...a})}function v(t){let{className:e,...a}=t;return(0,o.jsx)(i.hE,{"data-slot":"dialog-title",className:(0,s.cn)("text-lg leading-none font-semibold",e),...a})}function m(t){let{className:e,...a}=t;return(0,o.jsx)(i.VY,{"data-slot":"dialog-description",className:(0,s.cn)("text-muted-foreground text-sm",e),...a})}}}]);